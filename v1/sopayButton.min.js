const scripts=document.getElementById("SBScript"),language=scripts.getAttribute("data-lang"),fr={momo:{title:"Confirmez !",content:"Confirmez votre transaction mobile money en tapant *126#"},eu:{title:"Confirmez !",content:"Confirmez votre transaction Express Union sur votre application mobile EU app"},bitcoin:{title:"Proc\xE9dez \xE0 la transaction",content:"Vous pouvez transf\xE9rer sur ce portefeuille",total:"Montant \xE0 transferez :"},om:{title:"Confirmez !",content:"Confirmez votre transaction mobile money en tapant #150*50#"}},en={momo:{title:"Confirm !",content:"Confirm your mobile money's transaction by typing *126#"},eu:{title:"Confirm !",content:"Confirm your Express Union transaction on your mobile app EU"},bitcoin:{title:"Proceed To Transaction",content:"Please make transfert on this wallet",total:"Amount to transfert :"},om:{title:"Confirm !",content:"Confirm your orange money's transaction by typing #150*50#"}},lang="fr"==language.toLowerCase()?fr:en;function tip({elem:a,onSuccess:b,onFail:c,successUrl:d,currency:e,description:f,businessName:g,ref:h}){const i=$(`${a}_amount`).val(),j=$(`${a}_wallet`).val(),k=$(`${a}_service`).val(),l=$("#payer_name").val(),m=$(`${a}_otp`).val(),n=document.getElementById("SBScript"),o=n.getAttribute("data-apikey"),p="https://soleaspay.com/api/agent/bills?from=SELF",q=a=>{const b={outputType:"save",returnJsPDFDocObject:!0,fileName:`Invoicing-${g}`,orientationLandscape:!1,logo:{src:"https://soleaspay.com/qr/pay/asset/sopay.png",width:43.33,height:26.66,margin:{top:0,left:0}},business:{name:g},contact:{label:"Invoice issued for:",name:l,otherInfo:"https://app.soleaspay.com"},invoice:{label:"Invoice #: ",num:a.data.payId,invDate:`Payment Date: ${new Date().toDateString()}`,headerBorder:!1,tableBodyBorder:!1,header:["Payment Ref","Description","Price"],table:[[`${a.data.payId}`,`${f}`,a.data.amount]],invTotalLabel:"Total:",invTotal:`${a.data.amount}`,invCurrency:e},footer:{text:"SoleasPay Payment Gateway"},pageEnable:!1};jsPDFInvoiceTemplate.default(b)};switch(a){case"#om":$("#loader").show(),$.alert({title:lang.om.title,content:lang.om.content}),$.ajax({type:"POST",beforeSend:function(){},url:p,dataType:"JSON",headers:{"Content-Type":"application/json","x-api-key":`${o}`,operation:"2",service:`${k}`,otp:`${m}`},data:JSON.stringify({amount:i,wallet:j,currency:e,description:f,payer:l,ref:h})}).done(function(a){a.success?(q(a),b(a),$("#modalBtnClose").click()):c(a)}).fail(a=>console.error(a)).always(function(){$("#loader").hide()});break;case"#momo":$("#loader").show(),$.alert({title:lang.momo.title,content:lang.momo.content}),$.ajax({type:"POST",beforeSend:function(){},url:p,dataType:"JSON",headers:{"Content-Type":"application/json","x-api-key":`${o}`,operation:"2",service:`${k}`,otp:`${m}`},data:JSON.stringify({amount:i,wallet:j,currency:e,description:f,payer:l,ref:h})}).done(function(a){a.success?(q(a),b(a),$("#modalBtnClose").click()):c(a)}).fail(a=>console.error(a)).always(function(){$("#loader").hide()});break;case"#eu":$("#loader").show(),$.alert({title:lang.eu.title,content:lang.eu.content}),$.ajax({type:"POST",beforeSend:function(){},url:p,dataType:"JSON",headers:{"Content-Type":"application/json","x-api-key":`${o}`,operation:"2",service:`${k}`,otp:`${m}`},data:JSON.stringify({amount:i,wallet:j,currency:e,description:f,payer:l,ref:h})}).done(function(a){a.success?(q(a),b(a),$("#modalBtnClose").click()):c(a)}).fail(a=>console.error(a)).always(function(){$("#loader").hide()});break;case"#bitcoin":$("#loader").show(),$.ajax({type:"POST",beforeSend:function(){},url:p,dataType:"JSON",headers:{"Content-Type":"application/json","x-api-key":`${o}`,operation:"2",service:`${k}`},data:JSON.stringify({amount:i,currency:e,description:f,payer:l,ref:h})}).done(function(a){a.success?($.alert({title:lang.bitcoin.title,content:`${lang.bitcoin.title}. <br>
                                        
                                        <div class="alert alert-secondary" role="alert">
                                        <div id="qrcode"></div>
                                        <input type="text" value="${a.data.wallet}" disabled id="myInput">
                                            <input type="button" value="Copy wallet" class="btn btn-default" onclick="copyToClipboard(); this.value='Copied!'">
                                        </div>
                                           <br> ${lang.bitcoin.total} : <b>${a.data.value} ${a.data.currency}</b>`}),b(a)):c(a)}).fail(a=>console.error(a)).always(function(){$("#loader").hide()});break;case"#paypal":$("#loader").show(),$.ajax({type:"POST",beforeSend:function(){},url:p,dataType:"JSON",headers:{"Content-Type":"application/json","x-api-key":`${o}`,operation:"2",service:`${k}`},data:JSON.stringify({amount:i,wallet:j,currency:e,description:f,payer:l,ref:h})}).done(function(a){a.success?(window.open(`${a.data.payLink}`,"newwindow","width=900, height=800"),b(a)):c(a)}).fail(a=>console.error(a)).always(function(){$("#loader").hide()});break;case"#pm":$("#loader").show(),$.ajax({type:"POST",beforeSend:function(){},url:p,dataType:"JSON",headers:{"Content-Type":"application/json","x-api-key":`${o}`,operation:"2",service:`${k}`},data:JSON.stringify({amount:i,currency:e,description:f,payer:l,ref:h})}).done(function(a){a.success?(window.open(`https://soleaspay.com/pm/pay.html?amount=${i}&ref=${a.data.payId}&currency=${e}&successUrl=${d}`,"newwindow","width=900, height=800"),b(a)):c(a)}).fail(a=>console.error(a)).always(function(){$("#loader").hide()});break;default:}}function bill({elem:a,amount:b,onSuccess:c,onFail:d,successUrl:e,currency:f,description:g,businessName:h,ref:i}){const j=$(`${a}_wallet`).val(),k=$(`${a}_service`).val(),l=$(`${a}_otp`).val(),m=$("#payer_name").val(),n=document.getElementById("SBScript"),o=n.getAttribute("data-apikey"),p="https://soleaspay.com/api/agent/bills?from=SELF",q=a=>{const b={outputType:"save",returnJsPDFDocObject:!0,fileName:`Invoicing-${h}`,orientationLandscape:!1,logo:{src:"https://soleaspay.com/qr/pay/asset/sopay.png",width:43.33,height:26.66,margin:{top:0,left:0}},business:{name:h},contact:{label:"Invoice issued for:",name:m,otherInfo:"https://app.soleaspay.com"},invoice:{label:"Invoice #: ",num:a.data.payId,invDate:`Payment Date: ${new Date().toDateString()}`,headerBorder:!1,tableBodyBorder:!1,header:["Payment Ref","Description","Price"],table:[[`${a.data.payId}`,`${g}`,a.data.amount]],invTotalLabel:"Total:",invTotal:`${a.data.amount}`,invCurrency:f},footer:{text:"SoleasPay Payment Gateway"},pageEnable:!1};jsPDFInvoiceTemplate.default(b)};switch(a){case"#om":$("#loader").show(),$.alert({title:lang.om.title,content:lang.om.content}),$.ajax({type:"POST",beforeSend:function(){},url:p,dataType:"JSON",headers:{"Content-Type":"application/json","x-api-key":`${o}`,operation:"2",service:`${k}`,otp:`${l}`},data:JSON.stringify({amount:b,wallet:j,currency:f,description:g,payer:m,ref:i})}).done(function(a){a.success?(q(a),c(a),$("#modalBtnClose").click()):d(a)}).fail(a=>console.error(a)).always(function(){$("#loader").hide()});break;case"#momo":$("#loader").show(),$.alert({title:lang.momo.title,content:lang.momo.content}),$.ajax({type:"POST",beforeSend:function(){},url:p,dataType:"JSON",headers:{"Content-Type":"application/json","x-api-key":`${o}`,operation:"2",service:`${k}`,otp:`${l}`},data:JSON.stringify({amount:b,wallet:j,currency:f,description:g,payer:m,ref:i})}).done(function(a){a.success?(q(a),c(a),$("#modalBtnClose").click()):(d(a),$(".close").click())}).fail(a=>console.error(a)).always(function(){$("#loader").hide()});break;case"#eu":$("#loader").show(),$.alert({title:lang.eu.title,content:lang.eu.content}),$.ajax({type:"POST",beforeSend:function(){},url:p,dataType:"JSON",headers:{"Content-Type":"application/json","x-api-key":`${o}`,operation:"2",service:`${k}`,otp:`${l}`},data:JSON.stringify({amount:b,wallet:j,currency:f,description:g,payer:m,ref:i})}).done(function(a){a.success?(q(a),c(a),$("#modalBtnClose").click()):d(a)}).fail(a=>console.error(a)).always(function(){$("#loader").hide()});break;case"#bitcoin":$("#loader").show(),$.ajax({type:"POST",beforeSend:function(){},url:p,dataType:"JSON",headers:{"Content-Type":"application/json","x-api-key":`${o}`,operation:"2",service:`${k}`},data:JSON.stringify({amount:b,currency:f,description:g,payer:m,ref:i})}).done(function(a){a.success?($.alert({title:lang.bitcoin.title,content:`${lang.bitcoin.content}. <br>
                                        
                                        <div class="alert alert-secondary" role="alert">
                                        <div id="qrcode"></div>
                                        <input type="text" value="${a.data.wallet}" disabled id="myInput">
                                            <input type="button" value="Copy wallet" class="btn btn-default" onclick="copyToClipboard(); this.value='Copied!'">
                                        </div>
                                           <br> ${lang.bitcoin.total} : <b>${a.data.value} ${a.data.currency}</b>`}),c(a)):d(a)}).fail(a=>console.error(a)).always(function(){$("#loader").hide()});break;case"#paypal":$("#loader").show(),$.ajax({type:"POST",beforeSend:function(){},url:p,dataType:"JSON",headers:{"Content-Type":"application/json","x-api-key":`${o}`,operation:"2",service:`${k}`},data:JSON.stringify({amount:b,wallet:j,currency:f,payer:m,ref:i})}).done(function(a){a.success?(window.open(`${a.data.payLink}`,"newwindow","width=900, height=800"),c(a)):d(a)}).fail(a=>console.error(a)).always(function(){$("#loader").hide()});break;case"#pm":$("#loader").show(),$.ajax({type:"POST",beforeSend:function(){},url:p,dataType:"JSON",headers:{"Content-Type":"application/json","x-api-key":`${o}`,operation:"2",service:`${k}`},data:JSON.stringify({amount:b,currency:f,payer:m,ref:i})}).done(function(a){a.success?(window.open(`https://soleaspay.com/pm/pay.html?amount=${b}&ref=${a.data.payId}&currency=${f}&successUrl=${e}`,"newwindow","width=900, height=800"),c(a)):d(a)}).fail(a=>console.error(a)).always(function(){$("#loader").hide()});break;default:}}const SopayButton={billing:function({businessName:a,amount:b,description:c,currency:d,btnTitle:e,onSuccess:f,onFail:g,successUrl:h,ref:i}){const j=document.createElement("script");j.src="https://code.jquery.com/jquery-3.5.0.js",document.getElementsByTagName("head")[0].appendChild(j),j.onload=function(){$("#sopayButton").load(`https://soleaspay.com/webPay/sopaybuttonBill${"fr"==language?"fr":"en"}.html`,function(){$("#om_form").submit(function(h){h.preventDefault(),bill({elem:"#om",amount:b,onSuccess:f,onFail:g,currency:d,description:c,businessName:a,ref:i})}),$("#momo_form").submit(function(h){h.preventDefault(),bill({elem:"#momo",amount:b,onSuccess:f,onFail:g,currency:d,description:c,businessName:a,ref:i})}),$("#eu_form").submit(function(h){h.preventDefault(),bill({elem:"#eu",amount:b,onSuccess:f,onFail:g,currency:d,description:c,businessName:a,ref:i})}),$("#bitcoin_form").submit(function(h){h.preventDefault(),bill({elem:"#bitcoin",amount:b,onSuccess:f,onFail:g,currency:d,description:c,businessName:a,ref:i})}),$("#pm_form").submit(function(j){j.preventDefault(),bill({elem:"#pm",amount:b,onSuccess:f,onFail:g,successUrl:h,currency:d,description:c,businessName:a,ref:i})}),$("#paypal_form").submit(function(j){j.preventDefault(),bill({elem:"#paypal",amount:b,onSuccess:f,onFail:g,successUrl:h,currency:d,description:c,businessName:a,ref:i})}),$("#detail_amount").html(`${b} ${d}`),$("#detail_description").html(`${c}`),e&&$("#spBtnTitle").html(`${e}`)})}},tiping:function({businessName:a,btnTitle:b,onSuccess:c,onFail:d,successUrl:f,currency:g,description:h,ref:i}){const j=document.createElement("script");j.src="https://code.jquery.com/jquery-3.5.0.js",document.getElementsByTagName("head")[0].appendChild(j),j.onload=function(){$("#sopayButton").load(`https://soleaspay.com/webPay/sopaybuttonTip${"fr"==language?"fr":"en"}.html`,function(){$("#om_form").submit(function(b){b.preventDefault(),tip({elem:"#om",onSuccess:c,onFail:d,currency:g,description:h,businessName:a,ref:i})}),$("#momo_form").submit(function(b){b.preventDefault(),tip({elem:"#momo",onSuccess:c,onFail:d,currency:g,description:h,businessName:a,ref:i})}),$("#eu_form").submit(function(b){b.preventDefault(),tip({elem:"#eu",onSuccess:c,onFail:d,currency:g,description:h,businessName:a,ref:i})}),$("#bitcoin_form").submit(function(b){b.preventDefault(),tip({elem:"#bitcoin",onSuccess:c,onFail:d,currency:g,description:h,businessName:a,ref:i})}),$("#pm_form").submit(function(b){b.preventDefault(),tip({elem:"#pm",amount:amount,onSuccess:c,onFail:d,successUrl:f,currency:g,description:h,businessName:a,ref:i})}),$("#paypal_form").submit(function(b){b.preventDefault(),tip({elem:"#paypal",amount:amount,onSuccess:c,onFail:d,successUrl:f,currency:g,description:h,businessName:a,ref:i})}),$("#detail_amount").html(`${g}`),$("#detail_description").html(`${h}`),b&&$("#spBtnTitle").html(`${b}`)})}}};function copyToClipboard(){var a=document.getElementById("myInput");a.select(),a.setSelectionRange(0,99999),navigator.clipboard.writeText(a.value)}